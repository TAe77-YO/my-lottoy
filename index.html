<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로또 & 연금복권 클라우드 분석기 Pro</title>
    <!-- React & Tailwind & Babel CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.min.css" rel="stylesheet">

    <!-- Firebase SDK (ES Modules) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, doc, deleteDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

        window.FirebaseSDK = { 
            initializeApp, getAuth, signInAnonymously, onAuthStateChanged, 
            getFirestore, collection, addDoc, query, onSnapshot, doc, deleteDoc, getDocs 
        };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        input[type="range"] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 8px; cursor: pointer; background: #e2e8f0; border-radius: 4px; }
        input[type="range"]::-webkit-slider-thumb { height: 20px; width: 20px; border-radius: 50%; background: #4f46e5; cursor: pointer; -webkit-appearance: none; margin-top: -6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .ball-shadow { box-shadow: inset -4px -4px 8px rgba(0,0,0,0.2), 2px 2px 6px rgba(0,0,0,0.1); }
        .tab-transition { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const App = () => {
            const [fb, setFb] = useState({ auth: null, db: null });
            const [user, setUser] = useState(null);
            const [activeTab, setActiveTab] = useState('lotto');
            const [showAdmin, setShowAdmin] = useState(false);
            const [isLoaded, setIsLoaded] = useState(false);
            const [error, setError] = useState(null);
            
            // 공용 당첨 데이터 상태
            const [lottoWinningData, setLottoWinningData] = useState([]);
            const [pensionWinningData, setPensionWinningData] = useState([]);
            const [selectedLottoId, setSelectedLottoId] = useState("");
            const [selectedPensionId, setSelectedPensionId] = useState("");

            // 유저 개인 저장 데이터
            const [mySavedLotto, setMySavedLotto] = useState([]);
            const [mySavedPension, setMySavedPension] = useState([]);

            // 입력 폼 상태 (분리됨)
            const [lottoInput, setLottoInput] = useState({ round: "", nums: "" });
            const [pensionInput, setPensionInput] = useState({ round: "", group: "", nums: "" });

            // 추출 관련 상태
            const [lottoSetsCount, setLottoSetsCount] = useState(1);
            const [generatedLottoSets, setGeneratedLottoSets] = useState([]);
            const [generatedPension, setGeneratedPension] = useState(null);

            const [options, setOptions] = useState({ 
                balanceOddEven: true, sumRange: [100, 175], useLastWeekCarry: true 
            });

            const firebaseConfig = {
                apiKey: "AIzaSyDgx9NCQiQn1dRm6fecK__pAoVFYN2d2q8",
                authDomain: "angellas.firebaseapp.com",
                projectId: "angellas",
                storageBucket: "angellas.firebasestorage.app",
                messagingSenderId: "520824812438",
                appId: "1:520824812438:web:182fd3231b94b9c58ce3b7"
            };

            const appId = typeof __app_id !== 'undefined' ? __app_id : 'angellas-lotto-pro-v6';

            // 1. 초기화 및 인증
            useEffect(() => {
                const init = async () => {
                    if (window.FirebaseSDK) {
                        try {
                            const { initializeApp, getAuth, getFirestore, signInAnonymously, onAuthStateChanged } = window.FirebaseSDK;
                            const app = initializeApp(firebaseConfig);
                            const auth = getAuth(app);
                            const db = getFirestore(app);
                            setFb({ auth, db });

                            await signInAnonymously(auth);
                            onAuthStateChanged(auth, (u) => { setUser(u); setIsLoaded(true); });
                        } catch (err) { setError(err.message); setIsLoaded(true); }
                    }
                };
                const timer = setInterval(() => { if (window.FirebaseSDK) { init(); clearInterval(timer); } }, 500);
                return () => clearInterval(timer);
            }, []);

            // 2. 실시간 데이터 수신 (공용 데이터 + 개인 저장 데이터)
            useEffect(() => {
                if (!user || !fb.db) return;
                const { collection, query, onSnapshot } = window.FirebaseSDK;

                // 공용 당첨 결과 수신
                const unsubLotto = onSnapshot(query(collection(fb.db, 'artifacts', appId, 'public', 'data', 'lottoWinners')), (s) => {
                    const data = s.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => b.round - a.round);
                    setLottoWinningData(data);
                    if (data.length > 0 && !selectedLottoId) setSelectedLottoId(data[0].id);
                });

                const unsubPension = onSnapshot(query(collection(fb.db, 'artifacts', appId, 'public', 'data', 'pensionWinners')), (s) => {
                    const data = s.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => b.round - a.round);
                    setPensionWinningData(data);
                    if (data.length > 0 && !selectedPensionId) setSelectedPensionId(data[0].id);
                });

                // 개인 저장 목록 수신 (RULE 1: users/{userId} 경로 사용)
                const unsubMyLotto = onSnapshot(query(collection(fb.db, 'artifacts', appId, 'users', user.uid, 'myLotto')), (s) => {
                    setMySavedLotto(s.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => b.createdAt - a.createdAt));
                });

                const unsubMyPension = onSnapshot(query(collection(fb.db, 'artifacts', appId, 'users', user.uid, 'myPension')), (s) => {
                    setMySavedPension(s.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => b.createdAt - a.createdAt));
                });

                return () => { unsubLotto(); unsubPension(); unsubMyLotto(); unsubMyPension(); };
            }, [user, fb.db]);

            // 공용 데이터 저장 (관리자용)
            const handleAdminSave = async () => {
                if (!fb.db) return;
                const { collection, addDoc } = window.FirebaseSDK;
                try {
                    if (activeTab === 'lotto') {
                        const nums = lottoInput.nums.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
                        if (nums.length !== 6) return alert("6개 숫자를 입력하세요.");
                        await addDoc(collection(fb.db, 'artifacts', appId, 'public', 'data', 'lottoWinners'), {
                            round: parseInt(lottoInput.round), numbers: nums.sort((a, b) => a - b), timestamp: Date.now()
                        });
                        setLottoInput({ round: "", nums: "" });
                    } else {
                        const digits = pensionInput.nums.split('').map(n => parseInt(n)).filter(n => !isNaN(n));
                        if (digits.length !== 6) return alert("6자리 번호를 입력하세요.");
                        await addDoc(collection(fb.db, 'artifacts', appId, 'public', 'data', 'pensionWinners'), {
                            round: parseInt(pensionInput.round), group: parseInt(pensionInput.group), digits, timestamp: Date.now()
                        });
                        setPensionInput({ round: "", group: "", nums: "" });
                    }
                    alert("공용 데이터가 업데이트되었습니다.");
                } catch (e) { alert("저장 실패: " + e.message); }
            };

            // 개인 번호 저장 기능
            const saveMyNumbers = async (type, data) => {
                if (!user || !fb.db) return;
                const { collection, addDoc } = window.FirebaseSDK;
                try {
                    const colName = type === 'lotto' ? 'myLotto' : 'myPension';
                    const payload = type === 'lotto' 
                        ? { sets: data, round: lottoWinningData[0]?.round || "미지정", createdAt: Date.now() }
                        : { ...data, round: pensionWinningData[0]?.round || "미지정", createdAt: Date.now() };
                    
                    await addDoc(collection(fb.db, 'artifacts', appId, 'users', user.uid, colName), payload);
                    alert("나의 저장소에 번호가 보관되었습니다!");
                } catch (e) { alert("저장 중 오류 발생: " + e.message); }
            };

            const deleteItem = async (id, col, isPublic = false) => {
                const { doc, deleteDoc } = window.FirebaseSDK;
                const path = isPublic 
                    ? doc(fb.db, 'artifacts', appId, 'public', 'data', col, id)
                    : doc(fb.db, 'artifacts', appId, 'users', user.uid, col, id);
                await deleteDoc(path);
            };

            // 추출 로직
            const runExtraction = () => {
                if (activeTab === 'lotto') {
                    const newSets = [];
                    for(let s = 0; s < lottoSetsCount; s++) {
                        let attempts = 0;
                        const last = lottoWinningData[0];
                        while (attempts < 100) {
                            let nums = new Set();
                            if (options.useLastWeekCarry && last) {
                                const carry = Math.floor(Math.random() * 2) + 1;
                                [...last.numbers].sort(() => Math.random() - 0.5).slice(0, carry).forEach(n => nums.add(n));
                            }
                            while (nums.size < 6) { nums.add(Math.floor(Math.random() * 45) + 1); }
                            const final = Array.from(nums).sort((a, b) => a - b);
                            const sum = final.reduce((a, b) => a + b, 0);
                            const odd = final.filter(n => n % 2 !== 0).length;
                            if (sum >= options.sumRange[0] && sum <= options.sumRange[1] && (!options.balanceOddEven || (odd >= 2 && odd <= 4))) {
                                newSets.push(final);
                                break;
                            }
                            attempts++;
                        }
                    }
                    setGeneratedLottoSets(newSets);
                } else {
                    const result = { group: Math.floor(Math.random() * 5) + 1, digits: Array.from({ length: 6 }, () => Math.floor(Math.random() * 10)) };
                    setGeneratedPension(result);
                }
            };

            const getBallColor = (n) => n <= 10 ? 'bg-yellow-400' : n <= 20 ? 'bg-blue-400' : n <= 30 ? 'bg-red-400' : n <= 40 ? 'bg-gray-400' : 'bg-green-400';

            if (!isLoaded) return <div className="min-h-screen flex items-center justify-center text-slate-400 animate-pulse font-bold">Angellas Cloud Syncing...</div>;

            const displayLotto = lottoWinningData.find(d => d.id === selectedLottoId) || lottoWinningData[0];
            const displayPension = pensionWinningData.find(d => d.id === selectedPensionId) || pensionWinningData[0];

            return (
                <div className="max-w-6xl mx-auto p-4 md:p-8 animate-in fade-in duration-700">
                    {/* 상단 탭 */}
                    <div className="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                        <div className="bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 flex">
                            <button onClick={() => {setActiveTab('lotto'); setShowAdmin(false);}} className={`px-8 py-3 rounded-xl font-black tab-transition ${activeTab === 'lotto' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-500 hover:bg-slate-50'}`}>로또 6/45</button>
                            <button onClick={() => {setActiveTab('pension'); setShowAdmin(false);}} className={`px-8 py-3 rounded-xl font-black tab-transition ${activeTab === 'pension' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-500 hover:bg-slate-50'}`}>연금복권</button>
                        </div>
                        <button onClick={() => setShowAdmin(!showAdmin)} className="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 hover:border-indigo-300">
                            <i className="lucide-database w-4 h-4"></i> 당첨 데이터 관리
                        </button>
                    </div>

                    {/* 관리자 패널 */}
                    {showAdmin && (
                        <div className="mb-8 bg-white rounded-3xl p-6 shadow-xl border-2 border-indigo-100 animate-in slide-in-from-top-4 duration-300">
                            <h3 className="font-black text-indigo-900 mb-4 flex items-center gap-2 uppercase">공용 데이터 업데이트</h3>
                            {activeTab === 'lotto' ? (
                                <div className="flex flex-col md:flex-row gap-2 mb-4">
                                    <input type="number" placeholder="로또 회차" value={lottoInput.round} onChange={(e) => setLottoInput({...lottoInput, round: e.target.value})} className="w-24 px-4 py-3 bg-slate-50 border rounded-xl text-sm font-bold" />
                                    <input type="text" placeholder="번호 (1, 5, 23...)" value={lottoInput.nums} onChange={(e) => setLottoInput({...lottoInput, nums: e.target.value})} className="flex-1 px-4 py-3 bg-slate-50 border rounded-xl text-sm font-bold" />
                                    <button onClick={handleAdminSave} className="px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold">저장</button>
                                </div>
                            ) : (
                                <div className="flex flex-col md:flex-row gap-2 mb-4">
                                    <input type="number" placeholder="연금 회차" value={pensionInput.round} onChange={(e) => setPensionInput({...pensionInput, round: e.target.value})} className="w-24 px-4 py-3 bg-slate-50 border rounded-xl text-sm font-bold" />
                                    <input type="number" placeholder="조" value={pensionInput.group} onChange={(e) => setPensionInput({...pensionInput, group: e.target.value})} className="w-20 px-4 py-3 bg-slate-50 border rounded-xl text-sm font-bold text-center" />
                                    <input type="text" placeholder="6자리 번호 (123456)" value={pensionInput.nums} onChange={(e) => setPensionInput({...pensionInput, nums: e.target.value})} className="flex-1 px-4 py-3 bg-slate-50 border rounded-xl text-sm font-bold" />
                                    <button onClick={handleAdminSave} className="px-8 py-3 bg-purple-600 text-white rounded-xl font-bold">저장</button>
                                </div>
                            )}
                            <div className="max-h-24 overflow-y-auto custom-scrollbar border-t pt-2 space-y-1">
                                {(activeTab === 'lotto' ? lottoWinningData : pensionWinningData).map(d => (
                                    <div key={d.id} className="flex justify-between items-center p-2 bg-slate-50 rounded-lg text-[11px] font-bold border border-slate-100">
                                        <span>[{d.round}회] {activeTab === 'lotto' ? d.numbers.join(', ') : `${d.group}조 ${d.digits.join('')}`}</span>
                                        <button onClick={() => deleteItem(d.id, activeTab === 'lotto' ? 'lottoWinners' : 'pensionWinners', true)} className="text-slate-300 hover:text-red-500"><i className="lucide-trash-2 w-3 h-3"></i></button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <div className="lg:col-span-8 space-y-6">
                            {/* 최근 당첨 정보 표시 */}
                            <div className="bg-slate-900 rounded-[2rem] p-6 shadow-2xl border border-slate-800 relative">
                                <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                                    <div className="text-left w-full md:w-auto">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="px-2 py-0.5 bg-yellow-500 text-slate-900 text-[9px] font-black rounded uppercase animate-pulse">Winner Info</span>
                                            <select 
                                                value={activeTab === 'lotto' ? selectedLottoId : selectedPensionId}
                                                onChange={(e) => activeTab === 'lotto' ? setSelectedLottoId(e.target.value) : setSelectedPensionId(e.target.value)}
                                                className="bg-slate-800 text-white text-[11px] font-bold border-none rounded-lg px-2 py-1 outline-none focus:ring-1 focus:ring-yellow-500"
                                            >
                                                {(activeTab === 'lotto' ? lottoWinningData : pensionWinningData).map(d => (
                                                    <option key={d.id} value={d.id}>{d.round}회차 결과 보기</option>
                                                ))}
                                                {(activeTab === 'lotto' ? lottoWinningData : pensionWinningData).length === 0 && <option value="">데이터 없음</option>}
                                            </select>
                                        </div>
                                        <h4 className="text-white font-bold text-sm">
                                            {activeTab === 'lotto' ? (displayLotto ? `${displayLotto.round}회차 당첨 번호` : '정보 없음') : (displayPension ? `${displayPension.round}회차 당첨 번호` : '정보 없음')}
                                        </h4>
                                    </div>
                                    <div className="flex gap-2">
                                        {activeTab === 'lotto' ? (
                                            displayLotto?.numbers.map((n, i) => (
                                                <div key={i} className={`w-9 h-9 rounded-full flex items-center justify-center text-white text-xs font-black ball-shadow ${getBallColor(n)}`}>{n}</div>
                                            ))
                                        ) : (
                                            displayPension && <div className="flex items-center gap-2">
                                                <span className="text-purple-400 font-black text-sm">{displayPension.group}조</span>
                                                <div className="flex gap-1">{displayPension.digits.map((d, i) => <div key={i} className="w-7 h-10 bg-slate-800 border border-slate-700 rounded-lg flex items-center justify-center text-white font-bold text-sm">{d}</div>)}</div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* 추출 영역 */}
                            <div className="bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100 flex flex-col items-center relative">
                                {activeTab === 'lotto' ? (
                                    <div className="w-full text-center">
                                        {/* 세트 수 선택 */}
                                        <div className="flex items-center justify-center gap-3 mb-8">
                                            <span className="text-xs font-black text-slate-400 uppercase tracking-tighter">추출 세트 선택</span>
                                            <div className="flex bg-slate-100 p-1 rounded-xl">
                                                {[1, 2, 3, 4, 5].map(n => (
                                                    <button key={n} onClick={() => setLottoSetsCount(n)} className={`w-8 h-8 rounded-lg text-xs font-black transition-all ${lottoSetsCount === n ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>{n}</button>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        <div className="space-y-6 mb-12">
                                            {(generatedLottoSets.length > 0 ? generatedLottoSets : [Array(6).fill(0)]).map((set, sIdx) => (
                                                <div key={sIdx} className="flex flex-wrap justify-center gap-3 animate-in zoom-in-95 duration-300">
                                                    {set.map((num, idx) => (
                                                        <div key={idx} className={`${num ? getBallColor(num) : 'bg-slate-50 border-2 border-dashed border-slate-200 text-slate-300'} w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center text-white text-xl md:text-2xl font-black shadow-lg transition-all transform hover:scale-110`}>{num || '?'}</div>
                                                    ))}
                                                </div>
                                            ))}
                                        </div>
                                        
                                        <div className="flex flex-col items-center gap-4">
                                            <button onClick={runExtraction} className="w-full max-w-md py-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-[2rem] font-black text-2xl shadow-xl flex items-center justify-center gap-3 mx-auto active:scale-95 transition-all">
                                                <i className="lucide-sparkles w-7 h-7 text-yellow-300"></i>
                                                <span>로또 번호 추출</span>
                                            </button>
                                            {generatedLottoSets.length > 0 && (
                                                <button onClick={() => saveMyNumbers('lotto', generatedLottoSets)} className="flex items-center gap-2 text-indigo-600 font-bold text-sm hover:underline">
                                                    <i className="lucide-save w-4 h-4"></i> 이 번호들을 나의 저장소에 보관하기
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ) : (
                                    <div className="w-full text-center">
                                        <div className="flex flex-wrap justify-center items-center gap-8 mb-12">
                                            <div className="flex flex-col items-center">
                                                <span className="text-xs font-black text-purple-400 mb-2">조</span>
                                                <div className="w-16 h-24 bg-purple-600 rounded-3xl flex items-center justify-center text-white text-5xl font-black shadow-lg">{generatedPension ? generatedPension.group : '?'}</div>
                                            </div>
                                            <div className="flex flex-col items-center">
                                                <span className="text-xs font-black text-slate-400 mb-2">번호</span>
                                                <div className="flex gap-2">{(generatedPension ? generatedPension.digits : [0,0,0,0,0,0]).map((d, i) => (<div key={i} className={`w-10 h-16 md:w-14 md:h-22 ${generatedPension ? 'bg-slate-800 shadow-xl' : 'bg-slate-50 border-2 border-dashed border-slate-200 text-slate-200'} rounded-2xl flex items-center justify-center text-white text-3xl font-black transition-all`}>{generatedPension ? d : '?'}</div>))}</div>
                                            </div>
                                        </div>
                                        <div className="flex flex-col items-center gap-4">
                                            <button onClick={runExtraction} className="w-full max-w-md py-6 bg-purple-600 hover:bg-purple-700 text-white rounded-[2rem] font-black text-2xl shadow-xl flex items-center justify-center gap-3 mx-auto active:scale-95 transition-all">
                                                <i className="lucide-zap w-7 h-7 text-yellow-300"></i>
                                                <span>연금 번호 추출</span>
                                            </button>
                                            {generatedPension && (
                                                <button onClick={() => saveMyNumbers('pension', generatedPension)} className="flex items-center gap-2 text-purple-600 font-bold text-sm hover:underline">
                                                    <i className="lucide-save w-4 h-4"></i> 이 번호를 나의 저장소에 보관하기
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* 사이드바: 설정 및 저장 목록 */}
                        <div className="lg:col-span-4 space-y-6">
                            <div className="bg-white rounded-[2rem] shadow-xl border border-slate-100 p-6">
                                <h3 className="font-black text-slate-800 flex items-center gap-2 pb-4 border-b border-slate-50 mb-4"><i className="lucide-settings-2 text-indigo-600"></i> 설정</h3>
                                <div className="space-y-6">
                                    <label className="flex items-center justify-between p-4 bg-indigo-50 rounded-2xl cursor-pointer hover:border-indigo-200 border-2 border-transparent transition-all">
                                        <div className="flex flex-col"><span className="text-sm font-black text-indigo-900 leading-tight">전주 번호 반영</span><span className="text-[10px] text-indigo-600 font-bold">1~2개 자동 포함</span></div>
                                        <button onClick={() => setOptions({...options, useLastWeekCarry: !options.useLastWeekCarry})} className={`w-12 h-6 rounded-full relative transition-colors ${options.useLastWeekCarry ? 'bg-indigo-600' : 'bg-slate-300'}`}><div className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${options.useLastWeekCarry ? 'left-7' : 'left-1'}`}></div></button>
                                    </label>
                                    <div className="space-y-2">
                                        <div className="flex justify-between items-center text-[10px] font-black text-slate-400 uppercase"><span>합계 범위 (100~{options.sumRange[1]})</span></div>
                                        <input type="range" min="100" max="220" value={options.sumRange[1]} onChange={(e) => setOptions({...options, sumRange: [100, parseInt(e.target.value)]})} className="h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer" />
                                    </div>
                                </div>
                            </div>

                            {/* [요청사항] 나의 저장소 목록 */}
                            <div className="bg-white rounded-[2rem] shadow-xl border border-slate-100 p-6 overflow-hidden">
                                <h3 className="font-black text-slate-800 mb-4 pb-4 border-b flex items-center gap-2 italic uppercase">
                                    <i className="lucide-heart text-rose-500 w-5 h-5"></i> My Saved {activeTab === 'lotto' ? 'Lotto' : 'Pension'}
                                </h3>
                                <div className="space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar pr-2">
                                    {(activeTab === 'lotto' ? mySavedLotto : mySavedPension).length > 0 ? (activeTab === 'lotto' ? mySavedLotto : mySavedPension).map((item, idx) => (
                                        <div key={item.id} className="p-4 bg-slate-50 rounded-2xl text-[10px] space-y-2 border border-slate-100 group hover:bg-white transition-all shadow-sm">
                                            <div className="flex justify-between items-center border-b border-slate-100 pb-2 mb-2">
                                                <span className="font-black text-indigo-600">[{item.round}회차 기준 저장]</span>
                                                <div className="flex items-center gap-2">
                                                    <span className="text-[9px] text-slate-400 font-bold italic">{new Date(item.createdAt).toLocaleString()}</span>
                                                    <button onClick={() => deleteItem(item.id, activeTab === 'lotto' ? 'myLotto' : 'myPension')} className="text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all"><i className="lucide-trash-2 w-3 h-3"></i></button>
                                                </div>
                                            </div>
                                            {activeTab === 'lotto' ? (
                                                <div className="space-y-1.5">
                                                    {item.sets.map((set, si) => (
                                                        <div key={si} className="flex gap-1 flex-wrap">
                                                            {set.map((n, ni) => <span key={ni} className="w-5 h-5 rounded-full flex items-center justify-center bg-white border border-slate-200 text-slate-700 font-black text-[8px]">{n}</span>)}
                                                        </div>
                                                    ))}
                                                </div>
                                            ) : (
                                                <div className="flex items-center gap-2">
                                                    <span className="text-purple-600 font-black px-2 bg-purple-100 rounded-lg">{item.group}조</span>
                                                    <span className="font-black text-slate-700 tracking-widest text-[11px]">{item.digits.join('')}</span>
                                                </div>
                                            )}
                                        </div>
                                    )) : <p className="text-center text-slate-300 text-[11px] py-20 font-bold uppercase tracking-widest">저장된 번호가 없습니다.</p>}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <footer className="mt-16 text-center text-slate-300 text-[10px] font-bold uppercase tracking-[0.3em] italic">
                        Lotto & Pension Cloud Pro Analyzer v6.0
                    </footer>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
